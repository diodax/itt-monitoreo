{"_id":"passport-cas","_rev":"8-74b6c2faf1a6f48532119f35eef63d5c","name":"passport-cas","description":"Cas authentication strategies for Passport.","dist-tags":{"latest":"0.1.0"},"versions":{"0.0.1":{"name":"passport-cas","version":"0.0.1","description":"Cas authentication strategies for Passport.","main":"index.js","scripts":{},"repository":{"type":"git","url":"git@github.com:sadne/passport-cas.git"},"keywords":["passport","auth","cas"],"author":{"name":"不会飞的羊"},"license":"MIT","bugs":{"url":"https://github.com/sadne/passport-cas/issues"},"homepage":"https://github.com/sadne/passport-cas","dependencies":{"passport":"~0.1.18"},"_id":"passport-cas@0.0.1","dist":{"shasum":"6bee693fc8bf38c92e57944d8087f3da455ed220","tarball":"https://registry.npmjs.org/passport-cas/-/passport-cas-0.0.1.tgz"},"_from":".","_npmVersion":"1.3.15","_npmUser":{"name":"sadne","email":"774070635@qq.com"},"maintainers":[{"name":"sadne","email":"774070635@qq.com"}],"directories":{}},"0.0.3":{"name":"passport-cas","version":"0.0.3","description":"Cas authentication strategies for Passport.","main":"index.js","scripts":{},"repository":{"type":"git","url":"git@github.com:sadne/passport-cas.git"},"keywords":["passport","auth","cas"],"author":{"name":"不会飞的羊"},"license":"MIT","bugs":{"url":"https://github.com/sadne/passport-cas/issues"},"homepage":"https://github.com/sadne/passport-cas","dependencies":{"passport":"~0.1.18","xml2js":"0.4.4"},"_id":"passport-cas@0.0.3","dist":{"shasum":"00d33c6ce5c833c8dde095c75869db939544baf7","tarball":"https://registry.npmjs.org/passport-cas/-/passport-cas-0.0.3.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"sadne","email":"774070635@qq.com"},"maintainers":[{"name":"sadne","email":"774070635@qq.com"}],"directories":{}},"0.1.0":{"name":"passport-cas","version":"0.1.0","description":"Cas authentication strategies for Passport.","main":"index.js","scripts":{},"repository":{"type":"git","url":"git@github.com:sadne/passport-cas.git"},"keywords":["passport","auth","cas"],"author":{"name":"不会飞的羊"},"license":"MIT","bugs":{"url":"https://github.com/sadne/passport-cas/issues"},"homepage":"https://github.com/sadne/passport-cas","dependencies":{"node-uuid":"1.4.1","passport":"~0.1.18","underscore":"1.6.0","xml2js":"0.4.4"},"gitHead":"5439b935887fb825be6f4c46ab8a75c746dac07f","_id":"passport-cas@0.1.0","_shasum":"046d668c1ed3bf1450911b9a648ca81c40e0141e","_from":".","_npmVersion":"2.5.1","_nodeVersion":"0.12.0","_npmUser":{"name":"sadne","email":"774070635@qq.com"},"dist":{"shasum":"046d668c1ed3bf1450911b9a648ca81c40e0141e","tarball":"https://registry.npmjs.org/passport-cas/-/passport-cas-0.1.0.tgz"},"maintainers":[{"name":"sadne","email":"774070635@qq.com"}],"directories":{}}},"readme":"# passport-cas\n\nCas authentication strategies for Passport.\n\n\n## Install\n\n    $ npm install passport-cas\n\n#### Configure Strategy\n\n    passport.use(new (require('passport-cas').Strategy)({\n      ssoBaseURL: 'http://www.example.com/',\n      serverBaseURL: 'http://localhost:3000'\n    }, function(login, done) {\n      User.findOne({login: login}, function (err, user) {\n        if (err) {\n          return done(err);\n        }\n        if (!user) {\n          return done(null, false, {message: 'Unknown user'});\n        }\n        return done(null, user);\n      });\n    }));\n\n#### Authenticate Requests\n\n    passport.authenticate('cas', function (err, user, info) {\n      if (err) {\n        return next(err);\n      }\n\n      if (!user) {\n        req.session.messages = info.message;\n        return res.redirect('/');\n      }\n\n      req.logIn(user, function (err) {\n        if (err) {\n          return next(err);\n        }\n\n        req.session.messages = '';\n        return res.redirect('/');\n      });\n    })\n\nFor example:\n\n    // GET: '/cas_login'\n    exports.casLogin = function(req, res, next) {\n      passport.authenticate('cas', function (err, user, info) {\n        if (err) {\n          return next(err);\n        }\n\n        if (!user) {\n          req.session.messages = info.message;\n          return res.redirect('/');\n        }\n\n        req.logIn(user, function (err) {\n          if (err) {\n            return next(err);\n          }\n\n          req.session.messages = '';\n          return res.redirect('/');\n        });\n      })(req, res, next);\n    };\n\n### CAS versions\n\n## CAS 3.0 configuration\nSince CAS3.0, the validation service returns a list of attributes for the authenticated user.\nHere is how you can use them:\n\n    passport.use(new (require('passport-cas').Strategy)({\n      version: 'CAS3.0',\n      ssoBaseURL: 'http://www.example.com/',\n      serverBaseURL: 'http://localhost:3000'\n    }, function(profile, done) {\n      var login = profile.user;\n\n      User.findOne({login: login}, function (err, user) {\n        if (err) {\n          return done(err);\n        }\n        if (!user) {\n          return done(null, false, {message: 'Unknown user'});\n        }\n        user.attributes = profile.attributes;\n        return done(null, user);\n      });\n    }));\n\n## CAS 2.0 configuration\nCAS 2.0 will work with the CAS 3.0 configuration, but you need to set the validation endpoint.\n\n    passport.use(new (require('passport-cas').Strategy)({\n      version: 'CAS3.0',\n      ssoBaseURL: 'http://www.example.com/',\n      serverBaseURL: 'http://localhost:3000/cas',\n      validateURL: '/serviceValidate'\n    }, function(profile, done) {\n      var login = profile.user;\n    \n      User.findOne({login: login}, function (err, user) {\n        if (err) {\n          return done(err);\n        }\n        if (!user) {\n          return done(null, false, {message: 'Unknown user'});\n        }\n        return done(null, user);\n      });\n    }));\n\n## License\n\n[The MIT License](http://opensource.org/licenses/MIT)\n","maintainers":[{"name":"sadne","email":"774070635@qq.com"}],"time":{"modified":"2015-06-30T02:21:16.510Z","created":"2014-01-09T03:12:38.156Z","0.0.1":"2014-01-09T03:12:40.234Z","0.0.3":"2014-08-22T16:30:44.674Z","0.1.0":"2015-06-30T02:21:16.510Z"},"author":{"name":"不会飞的羊"},"repository":{"type":"git","url":"git@github.com:sadne/passport-cas.git"},"homepage":"https://github.com/sadne/passport-cas","keywords":["passport","auth","cas"],"bugs":{"url":"https://github.com/sadne/passport-cas/issues"},"license":"MIT","readmeFilename":"README.md","users":{"zambon":true,"jfuentes":true},"_attachments":{},"_etag":"\"4H2IH1V9FDOYH108TLL2XSSE6\""}